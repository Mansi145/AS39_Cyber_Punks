(function(){var a=[].indexOf||function(f){for(var c=0,d=this.length;c<d;c++){if(c in this&&this[c]===f){return c;}}return -1;},b=[].slice;(function(c,d){if(typeof define==="function"&&define.amd){return define("waypoints",["jquery"],function(e){return d(e,c);});}else{return d(c.jQuery,c);}})(this,function(q,E){var A,j,x,z,D,k,I,G,B,F,H,c,e,d,C,t;
A=q(E);G=a.call(E,"ontouchstart")>=0;z={horizontal:{},vertical:{}};D=1;I={};k="waypoints-context-id";H="resize.waypoints";c="scroll.waypoints";e=1;d="waypoints-waypoint-ids";C="waypoint";t="waypoints";j=function(){function f(g){var h=this;this.$element=g;this.element=g[0];this.didResize=false;this.didScroll=false;
this.id="context"+D++;this.oldScroll={x:g.scrollLeft(),y:g.scrollTop()};this.waypoints={horizontal:{},vertical:{}};g.data(k,this.id);I[this.id]=this;g.bind(c,function(){var i;if(!(h.didScroll||G)){h.didScroll=true;i=function(){h.doScroll();return h.didScroll=false;};return E.setTimeout(i,q[t].settings.scrollThrottle);
}});g.bind(H,function(){var i;if(!h.didResize){h.didResize=true;i=function(){q[t]("refresh");return h.didResize=false;};return E.setTimeout(i,q[t].settings.resizeThrottle);}});}f.prototype.doScroll=function(){var g,h=this;g={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};
if(G&&(!g.vertical.oldScroll||!g.vertical.newScroll)){q[t]("refresh");}q.each(g,function(n,l){var m,o,i;i=[];o=l.newScroll>l.oldScroll;m=o?l.forward:l.backward;q.each(h.waypoints[n],function(p,r){var s,u;if(l.oldScroll<(s=r.offset)&&s<=l.newScroll){return i.push(r);}else{if(l.newScroll<(u=r.offset)&&u<=l.oldScroll){return i.push(r);
}}});i.sort(function(p,r){return p.offset-r.offset;});if(!o){i.reverse();}return q.each(i,function(p,r){if(r.options.continuous||p===i.length-1){return r.trigger([m]);}});});return this.oldScroll={x:g.horizontal.newScroll,y:g.vertical.newScroll};};f.prototype.refresh=function(){var l,h,g,i=this;g=q.isWindow(this.element);
h=this.$element.offset();this.doScroll();l={horizontal:{contextOffset:g?0:h.left,contextScroll:g?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:g?0:h.top,contextScroll:g?0:this.oldScroll.y,contextDimension:g?q[t]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};
return q.each(l,function(n,m){return q.each(i.waypoints[n],function(s,v){var p,r,o,u,w;p=v.options.offset;o=v.offset;r=q.isWindow(v.element)?0:v.$element.offset()[m.offsetProp];if(q.isFunction(p)){p=p.apply(v.element);}else{if(typeof p==="string"){p=parseFloat(p);if(v.options.offset.indexOf("%")>-1){p=Math.ceil(m.contextDimension*p/100);
}}}v.offset=r-m.contextOffset+m.contextScroll-p;if(v.options.onlyOnScroll&&o!=null||!v.enabled){return;}if(o!==null&&o<(u=m.oldScroll)&&u<=v.offset){return v.trigger([m.backward]);}else{if(o!==null&&o>(w=m.oldScroll)&&w>=v.offset){return v.trigger([m.forward]);}else{if(o===null&&m.oldScroll>=v.offset){return v.trigger([m.forward]);
}}}});});};f.prototype.checkEmpty=function(){if(q.isEmptyObject(this.waypoints.horizontal)&&q.isEmptyObject(this.waypoints.vertical)){this.$element.unbind([H,c].join(" "));return delete I[this.id];}};return f;}();x=function(){function f(l,h,m){var g,i;m=q.extend({},q.fn[C].defaults,m);if(m.offset==="bottom-in-view"){m.offset=function(){var n;
n=q[t]("viewportHeight");if(!q.isWindow(h.element)){n=h.$element.height();}return n-q(this).outerHeight();};}this.$element=l;this.element=l[0];this.axis=m.horizontal?"horizontal":"vertical";this.callback=m.handler;this.context=h;this.enabled=m.enabled;this.id="waypoints"+e++;this.offset=null;this.options=m;
h.waypoints[this.axis][this.id]=this;z[this.axis][this.id]=this;g=(i=l.data(d))!=null?i:[];g.push(this.id);l.data(d,g);}f.prototype.trigger=function(g){if(!this.enabled){return;}if(this.callback!=null){this.callback.apply(this.element,g);}if(this.options.triggerOnce){return this.destroy();}};f.prototype.disable=function(){return this.enabled=false;
};f.prototype.enable=function(){this.context.refresh();return this.enabled=true;};f.prototype.destroy=function(){delete z[this.axis][this.id];delete this.context.waypoints[this.axis][this.id];return this.context.checkEmpty();};f.getWaypointsByElement=function(i){var h,g;g=q(i).data(d);if(!g){return[];
}h=q.extend({},z.horizontal,z.vertical);return q.map(g,function(l){return h[l];});};return f;}();F={init:function(f,h){var g;if(h==null){h={};}if((g=h.handler)==null){h.handler=f;}this.each(function(){var i,m,n,l;i=q(this);n=(l=h.context)!=null?l:q.fn[C].defaults.context;if(!q.isWindow(n)){n=i.closest(n);
}n=q(n);m=I[n.data(k)];if(!m){m=new j(n);}return new x(i,m,h);});q[t]("refresh");return this;},disable:function(){return F._invoke(this,"disable");},enable:function(){return F._invoke(this,"enable");},destroy:function(){return F._invoke(this,"destroy");},prev:function(f,g){return F._traverse.call(this,f,g,function(i,l,h){if(l>0){return i.push(h[l-1]);
}});},next:function(f,g){return F._traverse.call(this,f,g,function(i,l,h){if(l<h.length-1){return i.push(h[l+1]);}});},_traverse:function(f,g,i){var l,h;if(f==null){f="vertical";}if(g==null){g=E;}h=B.aggregate(g);l=[];this.each(function(){var m;m=q.inArray(this,h[f]);return i(l,m,h[f]);});return this.pushStack(l);
},_invoke:function(f,g){f.each(function(){var h;h=x.getWaypointsByElement(this);return q.each(h,function(i,l){l[g]();return true;});});return this;}};q.fn[C]=function(){var f,g;g=arguments[0],f=2<=arguments.length?b.call(arguments,1):[];if(F[g]){return F[g].apply(this,f);}else{if(q.isFunction(g)){return F.init.apply(this,arguments);
}else{if(q.isPlainObject(g)){return F.init.apply(this,[null,g]);}else{if(!g){return q.error("jQuery Waypoints needs a callback function or handler option.");}else{return q.error("The "+g+" method does not exist in jQuery Waypoints.");}}}}};q.fn[C].defaults={context:E,continuous:true,enabled:true,horizontal:false,offset:0,triggerOnce:false};
B={refresh:function(){return q.each(I,function(f,g){return g.refresh();});},viewportHeight:function(){var f;return(f=E.innerHeight)!=null?f:A.height();},aggregate:function(f){var i,g,h;i=z;if(f){i=(h=I[q(f).data(k)])!=null?h.waypoints:void 0;}if(!i){return[];}g={horizontal:[],vertical:[]};q.each(g,function(m,l){q.each(i[m],function(n,o){return l.push(o);
});l.sort(function(n,o){return n.offset-o.offset;});g[m]=q.map(l,function(n){return n.element;});return g[m]=q.unique(g[m]);});return g;},above:function(f){if(f==null){f=E;}return B._filter(f,"vertical",function(g,h){return h.offset<=g.oldScroll.y;});},below:function(f){if(f==null){f=E;}return B._filter(f,"vertical",function(g,h){return h.offset>g.oldScroll.y;
});},left:function(f){if(f==null){f=E;}return B._filter(f,"horizontal",function(g,h){return h.offset<=g.oldScroll.x;});},right:function(f){if(f==null){f=E;}return B._filter(f,"horizontal",function(g,h){return h.offset>g.oldScroll.x;});},enable:function(){return B._invoke("enable");},disable:function(){return B._invoke("disable");
},destroy:function(){return B._invoke("destroy");},extendFn:function(f,g){return F[f]=g;},_invoke:function(f){var g;g=q.extend({},z.vertical,z.horizontal);return q.each(g,function(i,h){h[f]();return true;});},_filter:function(i,g,f){var h,l;h=I[q(i).data(k)];if(!h){return[];}l=[];q.each(h.waypoints[g],function(n,m){if(f(h,m)){return l.push(m);
}});l.sort(function(n,m){return n.offset-m.offset;});return q.map(l,function(m){return m.element;});}};q[t]=function(){var f,g;g=arguments[0],f=2<=arguments.length?b.call(arguments,1):[];if(B[g]){return B[g].apply(null,f);}else{return B.aggregate.call(null,g);}};q[t].settings={resizeThrottle:100,scrollThrottle:30};
return A.load(function(){return q[t]("refresh");});});}).call(this);